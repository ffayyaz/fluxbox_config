################################################################################
# fluxbox keys
################################################################################

# Control = CTRL
# Mod1 = Alt
# Mod4 = Super
# 115 = End
# 112 = Page Up
# 117 = Page Down
# Mouse1 = Left click
# Mouse2 = Middle click
# Mouse3 = Right click

Control Mod1 22             :Exit
Control Mod1 r              :Reconfigure
#Control Mod1 115            :CloseAllWindows # ctrl+mod4+end # dangerous

# lock screen
Mod1 115                    :Exec xscreensaver-command -lock  # Alt+End

#------------------------------------------------------- DESKTOP
# show desktop
Mod4 d                      :ShowDesktop

OnDesktop Mouse1            :HideMenus
#OnDesktop Mouse2            :WorkspaceMenu
OnDesktop Mouse3            :RootMenu

# scroll on the desktop to change workspaces (rather annoying sometimes)
#OnDesktop Mouse4            :PrevWorkspace
#OnDesktop Mouse5            :NextWorkspace

# scroll on the toolbar to change current window
OnToolbar Mouse4            :PrevWindow {static groups} (workspace=[current]) (iconhidden=no)
OnToolbar Mouse5            :NextWindow {static groups} (workspace=[current]) (iconhidden=no)

#------------------------------------------------------- WINDOWS

# move window
OnWindow Mod1 Mouse1        :MacroCmd {Focus} {Raise} {StartMoving}

# resize window
OnWindow Mod1 Mouse3        :MacroCmd {Focus} {Raise} {StartResizing NearestCorner}
# OnLeftGrip Mouse1         :StartResizing bottomleft # not in manpage ??
# OnRightGrip Mouse1        :StartResizing bottomright # not in manpage ??

# TODO check: alt + middle click to lower the window
OnWindow Mod1 Mouse2        :Lower

# control-click a window's titlebar and drag to attach windows
OnTitlebar Mouse2           :StartTabbing

# double click on the titlebar to shade
OnTitlebar Double Mouse1    :Maximize

# activate a tab
OnTitlebar Mouse1           :MacroCmd {Focus} {Raise} {ActivateTab}
# left click on the titlebar to move the window (!!!!!!)
# OnTitlebar Mouse1          :StartMoving

# right click on the titlebar for a menu of options
OnTitlebar Mouse3           :WindowMenu

# alt-tab
Mod1 Tab                    :NextWindow {static groups} (workspace=[current])
Mod1 Shift Tab              :PrevWindow {static groups} (workspace=[current])

# go to a specific window in current workspace
Control Mod1 1                      :GoToWindow 1   {static groups} (workspace=[current])
Control Mod1 2                      :GoToWindow 2   {static groups} (workspace=[current])
Control Mod1 3                      :GoToWindow 3   {static groups} (workspace=[current])
Control Mod1 4                      :GoToWindow 4   {static groups} (workspace=[current])
Control Mod1 5                      :GoToWindow 5   {static groups} (workspace=[current])
Control Mod1 6                      :GoToWindow 6   {static groups} (workspace=[current])
Control Mod1 7                      :GoToWindow 7   {static groups} (workspace=[current])
Control Mod1 8                      :GoToWindow 8   {static groups} (workspace=[current])
Control Mod1 9                      :GoToWindow 9   {static groups} (workspace=[current])
Control Mod1 0                      :GoToWindow 10  {static groups} (workspace=[current])

# cycle through windows in order as seen in toolbar ("modified" alt-tab)
Mod1 Left                   :PrevWindow {static groups} (workspace=[current])
Mod1 Right                  :NextWindow {static groups} (workspace=[current])

# close window
Mod1 F4                     :Close

# fullscreen mode
Mod1 F11                    :Fullscreen

# minimize maximize
Mod1 Down                   :Minimize
Mod1 Up                     :ToggleCmd {MacroCmd {Maximize} {Focus} {Raise}}
#Mod4 Down                   :MacroCmd {MaximizeHorizontal} {Focus} {Raise}
#Mod4 Up                     :MacroCmd {MaximizeVertical} {Focus} {Raise}

# open the window menu
Mod1 space                  :WindowMenu

# replace windows 
# if head=1, just switch between left and right, 
# otherwise attach to each corner
#Mod1 m                      :ToggleCmd {MacroCmd {MoveTo 0 0 TopLeft} {Focus} {Raise}} {MacroCmd {MoveTo 0 0 TopRight} {Focus} {Raise}} {MacroCmd {MoveTo 0 0 BottomRight} {Focus} {Raise}} {MacroCmd {MoveTo 0 0 BottomLeft} {Focus} {Raise}}
Mod1 m                      :If {Matches (Head=1)} {ToggleCmd {MacroCmd {MoveTo 0 0 TopLeft} {ResizeTo 40% 100%} {Focus} {Raise}} {MacroCmd {MoveTo 40% 0 TopLeft} {ResizeTo 60% 100%} {Focus} {Raise}}} {ToggleCmd {MacroCmd {MoveTo 0 0 TopLeft} {Focus} {Raise}} {MacroCmd {MoveTo 0 0 TopRight} {Focus} {Raise}} {MacroCmd {MoveTo 0 0 BottomRight} {Focus} {Raise}} {MacroCmd {MoveTo 0 0 BottomLeft} {Focus} {Raise}}}
Mod1 117                    :SendToPrevHead 1 # alt+page down
Mod1 112                    :SendToNextHead 1 # alt+page up

#------------------------------------------------------- TABS

# cycle through tabs in the current window
Mod4 Tab                    :NextTab
Mod4 Shift Tab              :PrevTab

# scroll through tabs ("modified" win-tab)
OnTab Mouse4                :PrevTab
OnTab Mouse5                :NextTab

# cycle through tabs  ("modified" win-tab)
Mod4 Left              :PrevTab
Mod4 Right             :NextTab

# move tab right / left
Shift Mod4 Left             :MoveTabLeft
Shift Mod4 Right            :MoveTabRight

# go to a specific tab in the current window
Mod4 1                      :Tab 1
Mod4 2                      :Tab 2
Mod4 3                      :Tab 3
Mod4 4                      :Tab 4
Mod4 5                      :Tab 5
Mod4 6                      :Tab 6
Mod4 7                      :Tab 7
Mod4 8                      :Tab 8
Mod4 9                      :Tab 9
Mod4 0                      :Tab 10

# detach a window (tab) from group
Mod1 d                :DetachClient

#------------------------------------------------------- WORKSPACE

# change to previous/next workspace
Control Mod1 Left           :PrevWorkspace
Control Mod1 Right          :NextWorkspace

# change to a specific workspace
Control 1                   :Workspace 1
Control 2                   :Workspace 2
Control 3                   :Workspace 3
Control 4                   :Workspace 4
Control 5                   :MacroCmd {Workspace 5} {NextWindow (name=Mail)}
Control 6                   :Workspace 6
Control 7                   :Workspace 7
Control 8                   :Workspace 8
Control 9                   :Workspace 9
Control 0                   :Workspace 10

# send the current window to a specific workspace
Shift Mod4 1                :SendToWorkspace 1
Shift Mod4 2                :SendToWorkspace 2
Shift Mod4 3                :SendToWorkspace 3
Shift Mod4 4                :SendToWorkspace 4
Shift Mod4 5                :SendToWorkspace 5
Shift Mod4 6                :SendToWorkspace 6
Shift Mod4 7                :SendToWorkspace 7
Shift Mod4 8                :SendToWorkspace 8
Shift Mod4 9                :SendToWorkspace 9
Shift Mod4 0                :SendToWorkspace 10

# send the current window and change to a specific workspace
Control Mod4 1              :TakeToWorkspace 1
Control Mod4 2              :TakeToWorkspace 2
Control Mod4 3              :TakeToWorkspace 3
Control Mod4 4              :TakeToWorkspace 4
Control Mod4 5              :TakeToWorkspace 5
Control Mod4 6              :TakeToWorkspace 6
Control Mod4 7              :TakeToWorkspace 7
Control Mod4 8              :TakeToWorkspace 8
Control Mod4 9              :TakeToWorkspace 9
Control Mod4 0              :TakeToWorkspace 10

#------------------------------------------------------- SHORTCUTS

# Mod4+s to shade (workaround wege chromium)
# Mod4 s                      :MacroCmd {Shade} {Shade}
Mod4 l                      :MacroCmd {Shade} {Shade}

# programs
Mod1 F1                     :MacroCmd {Exec urxvt} {Focus} {Raise}
Mod1 F2                     :MacroCmd {Exec urxvt -name URxvt-remote -tn remoteterm} {Focus} {Raise}
Mod1 F3                     :MacroCmd {Exec chromium} {Focus} {Raise}
Mod1 F5                     :MacroCmd {Exec chromium --app="http://www.teleboy.ch/player/live"} {Focus} {Raise}
#Mod1 F6                     :MacroCmd {Exec opera-next} {Focus} {Raise}
#Mod1 F7                     :MacroCmd {Exec opera} {Focus} {Raise}
#Mod1 F8                     :MacroCmd {Exec icedove} {Focus} {Raise}
#Mod1 F9                     :MacroCmd {Exec kate} {Focus} {Raise}
#Mod1 F10                    :MacroCmd {Exec urxvt -name URxvt-remote2 -tn remoteterm} {Focus} {Raise}

Mod4 t                      :Exec urxvt -name topterm -e top

#------------------------------------------------------- TOGGLES
# xcompmgr
# Mod4 x                      :ToggleCmd {Exec xcompmgr -cC -fF -r6 -l-6 -t-6 -I-0.004 -O-0.004 -D1.95} {Exec pkill xcompmgr}
Mod4 x                      :ToggleCmd {Exec compton -r12 -o0.75 -l-15 -t-15 -I0.005 -O0.005 -D1 -m1.0 -cC -z -f -G -b} {Exec pkill compton}

# volume settings, using common keycodes
# if these don't work, use xev to find out your real keycodes
Mod4 112                    :Exec amixer -D pulse sset Master 5%+       # Super+PageUp
Mod4 117                    :Exec amixer -D pulse sset Master 5%-       # Super+PageDown
Mod4 115                    :Exec amixer -D pulse sset Master,0 toggle  # Super+End

# control audio player
Control Mod4 112            :Exec audacious -f # next track
Control Mod4 117            :Exec audacious -r # previous track
Control Mod4 115            :Exec audacious -u # pause / unpause


#------------------------------------------------------- TESTING
#ChangeWorkspace             :Exec fbsetbg -f ~/.fluxbox/wallpaper/$(ls ~/.fluxbox/wallpaper/|sort -R|tail -1)
#ChangeWorkspace             :ForEach {Stick} {Some (Name=www.teleboy.ch__player_live)}
#Shift Mod4 p                :If { Some Matches (Chromium) } { MacroCmd { NextWindow (class=Chromium) } }
#Mod4 p :If {Some Matches (name=*xvt*)} {ForEach {Minimize} {Some Matches (name=*xvt*)}} #{NextWindow (class=URxvt)} #{Exec urxvt}
#Mod4 p :ForEach {Minimize} {Matches (class=URxvt)}} #{NextWindow (class=URxvt)} #{Exec urxvt}
Control b Mod1 c :ForEach {NextWindow (name=chromium)} {Matches (name=chromium)}
Control b Mod1 b :Exec ~/.fluxbox/find_app.sh /usr/bin/chromium
