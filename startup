#!/bin/sh
#
# fluxbox startup-script:
#
# Lines starting with a '#' are ignored.

# set black background forcibly (maybe overlay is not needed anymore)
# /usr/bin/fbsetroot -solid black

# or set a background image
#fbsetbg -f /path/to/image.jpg
fbsetbg -f ~/.fluxbox/wallpaper/green-frequency-wavy-lines-26422.jpg

# show fluxbox splash screen
#fbsetbg -C /usr/share/fluxbox/splash.jpg

# turn off beeps
xset b off

# own font path
# xset +fp "~/.fonts"

# Change your keymap:
#xmodmap "~/.Xmodmap" # TODO check this
[ -f /usr/bin/setxkbmap ] && /usr/bin/setxkbmap ch

# Applications you want to run with fluxbox.
# MAKE SURE THAT APPS THAT KEEP RUNNING HAVE AN ''&'' AT THE END.
#

# slit
[ -x /usr/bin/gkrellm ] && gkrellm -w &
[ -x /usr/bin/wmmoonclock ] && wmmoonclock &

# visual effects
if [ -x /usr/bin/compton ]; then                                               
    compton -r12 -o0.75 -l-15 -t-15 -I0.005 -O0.005 -D1 -m1.0 -cC -z -f -G -b                                                                     
fi

# make mouse pointer invisible
[ -x /usr/bin/unclutter ] && unclutter -idle 10 -jitter 10 -regex -notclass ".*xvt.*" ".*term.*" ".*log.*" &

################### GUI APPLICATIONS ###########################################
# NOTE: gui apps need to be started delayed
#       otherwise all windows are messed up 

fluxbox &
fbpid=$!

sleep 1
{
	~/.fluxbox/startapps.sh

    # Debian-local change:
    #   - fbautostart has been added with a quick hack to check to see if it
    #     exists. If it does, we'll start it up by default.
    which fbautostart > /dev/null
    if [ $? -eq 0 ]; then
        fbautostart
    fi
} &
 
wait $fbpid


# END AUTOSTART -----------------------------------------------------------


# And last but not least we start fluxbox.
# Because it is the last app you have to run it with ''exec'' before it.

#exec fluxbox
# or if you want to keep a log:
# exec fluxbox -log "/home/fafa/.fluxbox/log"
